<div class="dashboard">
  <main class="dashboard__content">

    <!-- FILTROS DE BÚSQUEDA -->
    <section class="filters">
      <h2 class="filters__title">Buscar Usuarios</h2>

      <form (ngSubmit)="searchUsers()" class="filters__form">
        <input type="number" placeholder="ID" [(ngModel)]="filters.id" name="id" class="filters__input" />

        <input type="text" placeholder="Username" [(ngModel)]="filters.username" name="username"
          class="filters__input" />

        <input type="email" placeholder="Email" [(ngModel)]="filters.email" name="email" class="filters__input" />

        <button type="submit" class="btn btn--primary filters__btn" [disabled]="store.loading()">
          Buscar
        </button>

        <button type="button" (click)="clearFilters()" class="btn btn--warning filters__btn"
          [disabled]="store.loading()">
          Limpiar
        </button>
      </form>
    </section>

    <!-- LOADING / ERROR -->
    @if (store.loading()) {
    <p>Cargando...</p>
    }

    @if (store.error()) {
    <p class="error">{{ store.error() }}</p>
    }

    <!-- TABLA DE USUARIOS -->
    <section class="users-table">
      <table class="users-table__table">
        <thead>
          <tr class="users-table__header-row">
            <th>ID</th>
            <th>Username</th>
            <th>Email</th>
            <th>Enabled</th>
            <th>Admin</th>
          </tr>
        </thead>

        <tbody>
          @for (user of store.users(); track user.id) {
          <tr class="users-table__row">
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>

            <td>
              <span class="users-table__status" [class.users-table__status--enabled]="user.enabled"
                [class.users-table__status--disabled]="!user.enabled">
                {{ user.enabled ? 'Sí' : 'No' }}
              </span>
            </td>

            <td>
              <span class="users-table__status" [class.users-table__status--admin]="user.isAdmin"
                [class.users-table__status--noadmin]="!user.isAdmin">
                {{ user.isAdmin ? '✔' : '✖' }}
              </span>
            </td>
          </tr>
          }
        </tbody>
      </table>

      <div class="users-table__pagination">
        <button (click)="loadPrevious()" [disabled]="!store.hasPrevious() || store.loading()"
          class="pagination__btn btn btn--primary">
          Anterior
        </button>

        <button (click)="loadNext()" [disabled]="!store.hasNext() || store.loading()"
          class="pagination__btn btn btn--primary">
          Siguiente
        </button>
      </div>
    </section>

  </main>
</div>